[gd_scene load_steps=17 format=3 uid="uid://b3mrx5kj7l8vc"]

[ext_resource type="PackedScene" uid="uid://l2n30mpbkdyw" path="res://addons/godot-xr-tools/hands/scenes/lowpoly/right_hand_low.tscn" id="1"]
[ext_resource type="PackedScene" uid="uid://b4kad2kuba1yn" path="res://addons/godot-xr-tools/hands/scenes/lowpoly/left_hand_low.tscn" id="2"]
[ext_resource type="Script" uid="uid://eyutyjcs6shy" path="res://scripts/controller.gd" id="3"]
[ext_resource type="Script" uid="uid://doeg578huqb6l" path="res://scripts/player.gd" id="4"]
[ext_resource type="PackedScene" uid="uid://c6nhx3y7j1vqk" path="res://scenes/Feature_UIRayCast.tscn" id="5"]
[ext_resource type="AudioStream" uid="uid://c0xrgcajnsyfk" path="res://sfx/RhySD-BackButton.wav" id="6"]
[ext_resource type="PackedScene" uid="uid://cxmhj7l4qkn5p" path="res://scenes/player_center.tscn" id="11"]
[ext_resource type="PackedScene" uid="uid://diyc4ru8c1n75" path="res://scenes/UITransition.tscn" id="12"]

[sub_resource type="SphereShape3D" id="22"]
margin = 0.02
radius = 0.1

[sub_resource type="CylinderMesh" id="20"]
top_radius = 0.02
bottom_radius = 0.015
height = 0.17

[sub_resource type="StandardMaterial3D" id="21"]
albedo_color = Color(0.180392, 0.180392, 0.180392, 1)
metallic = 1.0
roughness = 0.38

[sub_resource type="CapsuleMesh" id="17"]
radius = 0.01
height = 0.75

[sub_resource type="StandardMaterial3D" id="19"]
shading_mode = 0
albedo_color = Color(0.964706, 0.427451, 0.956863, 1)

[sub_resource type="CapsuleShape3D" id="16"]
radius = 0.02
height = 0.7

[sub_resource type="StandardMaterial3D" id="18"]
shading_mode = 0
albedo_color = Color(0.403922, 0.972549, 0.992157, 1)

[sub_resource type="BoxShape3D" id="15"]

[node name="Player" type="CharacterBody3D"]
process_mode = 3
collision_mask = 8
script = ExtResource("4")

[node name="XROrigin3D" type="XROrigin3D" parent="."]
process_mode = 3

[node name="XRCamera3D" type="XRCamera3D" parent="XROrigin3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.8, 0)
far = 200.0

[node name="HeadArea" type="Area3D" parent="XROrigin3D/XRCamera3D"]
collision_mask = 8

[node name="CollisionShape3D" type="CollisionShape3D" parent="XROrigin3D/XRCamera3D/HeadArea"]
shape = SubResource("22")

[node name="UITransition" parent="XROrigin3D/XRCamera3D" instance=ExtResource("12")]
transform = Transform3D(1.25, 0, 0, 0, 1.25, 0, 0, 0, 1.25, 0, 0, -0.4)
visible = false

[node name="Feature_UIRayCast" parent="XROrigin3D/XRCamera3D" instance=ExtResource("5")]
ui_raycast_length = 6.0

[node name="LeftHand" type="XRController3D" parent="XROrigin3D"]
tracker = &"left_hand"
script = ExtResource("3")
velocity_track_point = NodePath("Position3D2/Marker3D/EndTracker")

[node name="LeftHand" parent="XROrigin3D/LeftHand" instance=ExtResource("2")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.0448227, 0.147459)
visible = false

[node name="Position3D2" type="Marker3D" parent="XROrigin3D/LeftHand"]
transform = Transform3D(1, 0, 0, 0, 0.819152, -0.573577, 0, 0.573577, 0.819152, 0, 0, 0)

[node name="Marker3D" type="Marker3D" parent="XROrigin3D/LeftHand/Position3D2"]
transform = Transform3D(1, 0, 0, 0, 1, -2.98023e-08, 0, 2.98023e-08, 1, 0, 0, -0.377)

[node name="Handle" type="MeshInstance3D" parent="XROrigin3D/LeftHand/Position3D2/Marker3D"]
transform = Transform3D(1, 0, 0, 0, -8.9407e-08, -1, 0, 1, -8.9407e-08, 0, 1.11759e-08, 0.45)
mesh = SubResource("20")
surface_material_override/0 = SubResource("21")

[node name="Blade" type="MeshInstance3D" parent="XROrigin3D/LeftHand/Position3D2/Marker3D"]
mesh = SubResource("17")
surface_material_override/0 = SubResource("19")

[node name="EndTracker" type="Marker3D" parent="XROrigin3D/LeftHand/Position3D2/Marker3D"]
transform = Transform3D(1, 0, 0, 0, 1, -2.98023e-08, 0, 2.98023e-08, 1, 0, 0, -0.37)

[node name="Area3D" type="Area3D" parent="XROrigin3D/LeftHand/Position3D2/Marker3D"]
collision_layer = 2
collision_mask = 28

[node name="CollisionShape3" type="CollisionShape3D" parent="XROrigin3D/LeftHand/Position3D2/Marker3D/Area3D"]
shape = SubResource("16")

[node name="Feature_UIRayCast" parent="XROrigin3D/LeftHand/Position3D2/Marker3D" instance=ExtResource("5")]
controller_path = NodePath("../../..")
ui_raycast_length = 5.0

[node name="RightHand" type="XRController3D" parent="XROrigin3D"]
tracker = &"right_hand"
script = ExtResource("3")
velocity_track_point = NodePath("Marker3D/Marker3D/EndTracker")

[node name="HandModel" parent="XROrigin3D/RightHand" instance=ExtResource("1")]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, -1, 0, 1, -4.37114e-08, 0, -0.045, 0.147)
visible = false

[node name="Marker3D" type="Marker3D" parent="XROrigin3D/RightHand"]
transform = Transform3D(1, 0, 0, 0, 0.819152, -0.573577, 0, 0.573577, 0.819152, 0, 0, 0)

[node name="Marker3D" type="Marker3D" parent="XROrigin3D/RightHand/Marker3D"]
transform = Transform3D(1, 0, 0, 0, 1, -2.98023e-08, 0, 2.98023e-08, 1, 0, 0, -0.377)

[node name="Handle" type="MeshInstance3D" parent="XROrigin3D/RightHand/Marker3D/Marker3D"]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, -1, 0, 1, -4.37114e-08, 0, 0, 0.45)
mesh = SubResource("20")
skeleton = NodePath("../Blade")
surface_material_override/0 = SubResource("21")

[node name="Blade" type="MeshInstance3D" parent="XROrigin3D/RightHand/Marker3D/Marker3D"]
mesh = SubResource("17")
skeleton = NodePath("../..")
surface_material_override/0 = SubResource("18")

[node name="EndTracker" type="Marker3D" parent="XROrigin3D/RightHand/Marker3D/Marker3D"]
transform = Transform3D(1, 0, 0, 0, 1, -2.98023e-08, 0, 2.98023e-08, 1, 0, 5.96046e-08, -0.37)

[node name="Area3D" type="Area3D" parent="XROrigin3D/RightHand/Marker3D/Marker3D"]
collision_layer = 2
collision_mask = 28

[node name="CollisionShape2" type="CollisionShape3D" parent="XROrigin3D/RightHand/Marker3D/Marker3D/Area3D"]
shape = SubResource("16")

[node name="Feature_UIRayCast" parent="XROrigin3D/RightHand/Marker3D/Marker3D" instance=ExtResource("5")]
controller_path = NodePath("../../..")
ui_raycast_length = 5.0

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(0.1, 0, 0, 0, 0.1, 0, 0, 0, 0.1, 0, 0, 0)
shape = SubResource("15")

[node name="BombSound" type="AudioStreamPlayer" parent="."]
stream = ExtResource("6")

[node name="PlayerCenter" parent="." instance=ExtResource("11")]

[connection signal="area_entered" from="XROrigin3D/XRCamera3D/HeadArea" to="." method="_on_HeadArea_area_entered"]
[connection signal="area_entered" from="XROrigin3D/LeftHand/Position3D2/Marker3D/Area3D" to="." method="_on_Area_area_entered_left"]
[connection signal="body_entered" from="XROrigin3D/LeftHand/Position3D2/Marker3D/Area3D" to="." method="_on_left_hand_body_entered"]
[connection signal="body_exited" from="XROrigin3D/LeftHand/Position3D2/Marker3D/Area3D" to="." method="_on_Area_body_exited_left"]
[connection signal="area_entered" from="XROrigin3D/RightHand/Marker3D/Marker3D/Area3D" to="." method="_on_Area_area_entered_right"]
[connection signal="body_entered" from="XROrigin3D/RightHand/Marker3D/Marker3D/Area3D" to="." method="_on_right_hand_body_entered"]
[connection signal="body_exited" from="XROrigin3D/RightHand/Marker3D/Marker3D/Area3D" to="." method="_on_Area_body_exited_right"]
