[gd_scene load_steps=27 format=3 uid="uid://7ayj7cglk12m"]

[ext_resource type="Script" uid="uid://dkxv61amt5qsg" path="res://scripts/Game.gd" id="1"]
[ext_resource type="Environment" uid="uid://bmargeaaawkls" path="res://effects/Dark_environment.tres" id="2"]
[ext_resource type="AudioStream" uid="uid://d2gbs0iasd02q" path="res://sfx/RhySD-Scoreboard.wav" id="3"]
[ext_resource type="Theme" uid="uid://d1fbglwrn3v44" path="res://effects/menu_theme.tres" id="4"]
[ext_resource type="Script" uid="uid://bfd0a4boxmkre" path="res://scripts/beat_responder.gd" id="5"]
[ext_resource type="PackedScene" uid="uid://drlk24o5gw78t" path="res://scenes/environment_particles.tscn" id="6"]
[ext_resource type="PackedScene" uid="uid://detft1vbxyxsd" path="res://scenes/Ground.tscn" id="7"]
[ext_resource type="PackedScene" uid="uid://becsllrl52q2f" path="res://scenes/UICanvasInteract.tscn" id="8"]
[ext_resource type="AudioStream" uid="uid://13hc5ql1epd1" path="res://sfx/RhySD-StartButton.wav" id="9"]
[ext_resource type="Script" uid="uid://lojtn7gvvr2g" path="res://scripts/environment_particles.gd" id="10"]
[ext_resource type="PackedScene" uid="uid://c3vqk8h2r4xcp" path="res://scenes/UICanvas.tscn" id="11"]
[ext_resource type="FontFile" uid="uid://byemkjra3kgch" path="res://fonts/millimetre-font-128.tres" id="12"]
[ext_resource type="PackedScene" uid="uid://dm6ln1wr7hmcs" path="res://scenes/ui_combo.tscn" id="13"]
[ext_resource type="Material" uid="uid://bhuo1ttshnp37" path="res://effects/wall_material.tres" id="14"]
[ext_resource type="Material" uid="uid://fm84yumfchuq" path="res://effects/note_3_material.tres" id="15"]
[ext_resource type="PackedScene" uid="uid://bqmjf2xl6vp1h" path="res://scenes/ui_score.tscn" id="16"]
[ext_resource type="PackedScene" uid="uid://c4hmskf6kfhyq" path="res://scenes/ui_energy_bar.tscn" id="17"]
[ext_resource type="Material" uid="uid://dr8t6pa5tb8a4" path="res://effects/note_1_material.tres" id="18"]
[ext_resource type="Material" uid="uid://0l3q4ycp43lc" path="res://effects/note_0_material.tres" id="19"]
[ext_resource type="PackedScene" uid="uid://dp6qkljlk5y1r" path="res://scenes/ui_time_left.tscn" id="20"]
[ext_resource type="FontFile" uid="uid://dyway4ixu5nvl" path="res://fonts/millimetre-font-256.tres" id="21"]
[ext_resource type="Material" uid="uid://ceh5k72kyhean" path="res://effects/Ground.tres" id="22"]
[ext_resource type="PackedScene" uid="uid://dxkql2n7h4lqo" path="res://scenes/Lasers.tscn" id="23"]
[ext_resource type="PackedScene" uid="uid://rpgkb5jyych7" path="res://scenes/PauseMenu.tscn" id="24_jbgew"]

[sub_resource type="QuadMesh" id="5"]
size = Vector2(0.25, 500)

[sub_resource type="StyleBoxLine" id="6"]
color = Color(1, 1, 1, 0.501961)
thickness = 3

[node name="Game" type="Node3D"]
script = ExtResource("1")
environment = ExtResource("2")

[node name="Ground" parent="." instance=ExtResource("7")]

[node name="EnvironmentParticles" parent="." instance=ExtResource("6")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 4.45584, -8.76391)
lifetime = 5.0
script = ExtResource("10")

[node name="SpawnLocation" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -14)

[node name="BeatResponder" type="Node" parent="."]
script = ExtResource("5")
materials = [ExtResource("19"), ExtResource("18"), ExtResource("15"), ExtResource("14")]
params = {
"min_displace": 2.5
}
lerp_value = 10.0
set_value = 0.0

[node name="GroundBeatResponse" type="Node" parent="."]
script = ExtResource("5")
materials = [ExtResource("22")]
params = {
"displace_amount": 15.0
}
lerp_value = 1.0
disabled = true
response_frequency = 2.0

[node name="HitMarker" type="Marker3D" parent="."]
transform = Transform3D(1, -3.63798e-12, 1.45519e-11, 3.63798e-12, 1, 2.98024e-08, -1.45519e-11, -2.98024e-08, 1, 0, 0, 0.0753192)

[node name="MeshInstance3D" type="MeshInstance3D" parent="HitMarker"]
transform = Transform3D(-2.62268e-08, 0.015, -4.37114e-08, 0, -6.55671e-10, -1, -0.6, -6.55671e-10, 3.55271e-15, 0, 0.5, 0.12)
mesh = SubResource("5")
skeleton = NodePath("../..")

[node name="BigScore" parent="." instance=ExtResource("8")]
transform = Transform3D(1.5, 0, 0, 0, 1.5, 0, 0, 0, 2, 0, 1.5, -2.97768)
visible = false
transparent = true

[node name="ReferenceRect" type="Panel" parent="BigScore"]
offset_right = 1216.0
offset_bottom = 1230.0
theme = ExtResource("4")

[node name="VBoxContainer" type="VBoxContainer" parent="BigScore/ReferenceRect"]
layout_mode = 0
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -533.5
offset_top = -551.0
offset_right = 533.5
offset_bottom = 551.0
alignment = 1

[node name="Finished" type="RichTextLabel" parent="BigScore/ReferenceRect/VBoxContainer"]
clip_contents = false
custom_minimum_size = Vector2(1067, 256)
layout_mode = 2
theme_override_colors/default_color = Color(1, 0.305882, 0.92549, 1)
theme_override_fonts/normal_font = ExtResource("12")
theme_override_font_sizes/normal_font_size = 53
bbcode_enabled = true
text = "SONG FINISHED"
scroll_active = false

[node name="HSeparator2" type="HSeparator" parent="BigScore/ReferenceRect/VBoxContainer"]
layout_mode = 2
theme_override_styles/separator = SubResource("6")

[node name="TimeBonusLabel" type="Label" parent="BigScore/ReferenceRect/VBoxContainer"]
layout_mode = 2
theme_override_fonts/font = ExtResource("12")
theme_override_font_sizes/font_size = 64
text = "time bonus"
horizontal_alignment = 1
vertical_alignment = 1

[node name="TimeBonus" type="Label" parent="BigScore/ReferenceRect/VBoxContainer"]
layout_mode = 2
theme_override_font_sizes/font_size = 64
horizontal_alignment = 1
vertical_alignment = 1

[node name="HSeparator3" type="HSeparator" parent="BigScore/ReferenceRect/VBoxContainer"]
layout_mode = 2
theme_override_styles/separator = SubResource("6")

[node name="ScoreCardLabel" type="Label" parent="BigScore/ReferenceRect/VBoxContainer"]
layout_mode = 2
theme_override_colors/font_color = Color(0.25098, 0.478431, 0.239216, 1)
theme_override_font_sizes/font_size = 64
text = "final score"
horizontal_alignment = 1
vertical_alignment = 1

[node name="UIScore" parent="BigScore/ReferenceRect/VBoxContainer" instance=ExtResource("16")]
layout_mode = 2
theme_override_colors/font_color = Color(0.25098, 0.478431, 0.239216, 1)
text = "0"

[node name="HSeparator" type="HSeparator" parent="BigScore/ReferenceRect/VBoxContainer"]
layout_mode = 2
theme_override_styles/separator = SubResource("6")

[node name="HBoxContainer" type="HBoxContainer" parent="BigScore/ReferenceRect/VBoxContainer"]
layout_mode = 2
theme_override_constants/separation = 256
alignment = 1

[node name="RestartButton" type="Button" parent="BigScore/ReferenceRect/VBoxContainer/HBoxContainer"]
layout_mode = 2
theme = ExtResource("4")
theme_override_fonts/font = ExtResource("12")
theme_override_font_sizes/font_size = 64
action_mode = 0
text = "restart"

[node name="MenuButton" type="Button" parent="BigScore/ReferenceRect/VBoxContainer/HBoxContainer"]
layout_mode = 2
theme = ExtResource("4")
theme_override_fonts/font = ExtResource("12")
theme_override_font_sizes/font_size = 64
action_mode = 0
text = "menu"

[node name="SongFinished" type="AudioStreamPlayer" parent="BigScore"]
stream = ExtResource("3")

[node name="AcceptSound" type="AudioStreamPlayer" parent="BigScore"]
stream = ExtResource("9")

[node name="ScoreCanvas" parent="." instance=ExtResource("11")]
transform = Transform3D(1.22873, 0.363606, 0.0779755, 0, 1.35946, -0.0633927, -0.860365, 0.519283, 0.111361, -2.56726, 2.41427, -6.60775)

[node name="ReferenceRect" type="Panel" parent="ScoreCanvas"]
custom_minimum_size = Vector2(1024, 800)
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -512.0
offset_top = -400.0
offset_right = 512.0
offset_bottom = 400.0
theme = ExtResource("4")

[node name="CenterContainer" type="Container" parent="ScoreCanvas/ReferenceRect"]
custom_minimum_size = Vector2(900, 0)
layout_mode = 0
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -450.0
offset_top = -374.0
offset_right = 450.0
offset_bottom = 374.0

[node name="VBoxContainer" type="VBoxContainer" parent="ScoreCanvas/ReferenceRect/CenterContainer"]
custom_minimum_size = Vector2(900, 748)
layout_mode = 2
theme_override_constants/separation = 0
alignment = 1

[node name="UITimeLeft" parent="ScoreCanvas/ReferenceRect/CenterContainer/VBoxContainer" instance=ExtResource("20")]
layout_mode = 2
theme = null
theme_override_fonts/font = ExtResource("12")
text = "00:00:00"

[node name="HBoxContainer" type="HBoxContainer" parent="ScoreCanvas/ReferenceRect/CenterContainer/VBoxContainer"]
layout_mode = 2

[node name="UIScore" parent="ScoreCanvas/ReferenceRect/CenterContainer/VBoxContainer/HBoxContainer" instance=ExtResource("16")]
custom_minimum_size = Vector2(600, 190)
layout_mode = 2
text = "000000"

[node name="UICombo" parent="ScoreCanvas/ReferenceRect/CenterContainer/VBoxContainer/HBoxContainer" instance=ExtResource("13")]
layout_mode = 2
theme_override_fonts/font = ExtResource("21")
theme_override_font_sizes/font_size = 60
text = "X4"

[node name="EnergyBar" parent="ScoreCanvas/ReferenceRect/CenterContainer/VBoxContainer" instance=ExtResource("17")]
custom_minimum_size = Vector2(800, 100)
layout_mode = 2

[node name="Lasers" parent="." instance=ExtResource("23")]

[node name="StartTimer" type="Timer" parent="."]
wait_time = 2.0
one_shot = true

[node name="EndTimer" type="Timer" parent="."]
one_shot = true

[node name="Sun" type="DirectionalLight3D" parent="."]
transform = Transform3D(-0.57185084, 0.6294633, -0.52608234, 0.27022094, 0.75002825, 0.6036873, 0.7745757, 0.20306051, -0.59899837, 0.12419295, 14.558197, -9.005886)
light_color = Color(0.945098, 0.835294, 0.647059, 1)
light_energy = 1.5

[node name="PauseMenu" parent="." instance=ExtResource("24_jbgew")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.3676617, -3.7702389)
visible = false
disable_collision = true

[connection signal="pressed" from="BigScore/ReferenceRect/VBoxContainer/HBoxContainer/RestartButton" to="." method="_on_RestartButton_pressed"]
[connection signal="pressed" from="BigScore/ReferenceRect/VBoxContainer/HBoxContainer/MenuButton" to="." method="_on_MenuButton_pressed"]
[connection signal="timeout" from="StartTimer" to="." method="_on_StartTimer_timeout"]
[connection signal="timeout" from="EndTimer" to="." method="_on_EndTimer_timeout"]
